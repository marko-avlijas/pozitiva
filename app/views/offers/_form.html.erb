<%= form_for @offer, html: {role: "form"} do |f| %>

<% if @offer.errors.any? %>
<div id="error_explanation">
  <h2><%= pluralize(@offer.errors.count, "error") %> prohibited this post from being saved:</h2>
  <ul>
    <% @offer.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
    <% end %>
  </ul>
</div>
<% end %>

<div class="row">
  <div class="col-lg-12">
    <h4><span class="glyphicon glyphicon-bullhorn"></span> &nbsp;Osnovne informacije o ponudi</h4>
    <div class="col-lg-5 col-sm-6">
      <div class="form-group">
        <i class="fa fa-asterisk"></i> <%= f.label :title, "Naziv ponude:" %>
        <%= f.text_field :title, class: "form-control", placeholder: "Naziv ponude" %>
      </div>
      <div class="form-group">
        <%= f.label :attach, "PDF s više informacija o ponudi:" %>
        <%= f.file_field :attach, class: "form-control", placeholder: "PDF" %>
      </div>
    </div>
    <div class="col-lg-7 col-sm-6">
      <div class="form-group">
        <%= f.label :note, "Napomena:" %>
        <%= f.text_area :note,  class: "form-control", placeholder: "Napomena", style: "min-height: 109px" %>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-lg-12">
    <h4><i class="fa fa-th-list"></i> &nbsp;Proizvodi</h4>
    <div class="form-group" >
      <%= f.fields_for :offer_items do |offer_items_form| %>
      <div class="duplicatable_nested_form offer_items">
        <div class="row">
          <%= offer_items_form.hidden_field :id %>
          <%= offer_items_form.hidden_field :position %>
          <div class="form-group col-xs-11 col-md-4 <%= "alooo" if offer_items_form.object.status == "alert"  %>">
            <%= offer_items_form.label :title, "Naziv proizvoda:" %>
            <%= offer_items_form.text_field :title, class: "form-control", style: "margin-bottom: 10px; font-weight: bold; color: #cc2200" %>
            <%#= offer_items_form.select :status, options_for_select([["", nil], ["Alert", "alert"]], offer_items_form.object.status),{},{class: "form-control"} %> 
  
          </div>
          <div class="form-group col-xs-11 col-md-4" >
            <%= offer_items_form.label :note, "Opis:" %>
            <%= offer_items_form.text_area :note, class: "form-control item-description" %>
          </div>
          <div class="form-group col-xs-11 col-md-4">
            <%= offer_items_form.label :packaging, "Način prodaje (obračuna cijene):" %>
            <%= offer_items_form.select :packaging, options_for_select(OfferItem::PACKAGING, offer_items_form.object.packaging),{ include_blank: true },{ class: "form-control packaging", style: "width: 100%" } %>
          </div>
        </div>
        
        
        
        <div class="row form-rinfuza packaging-details">
          <div class="form-group col-xs-11 col-md-4">
            <%= offer_items_form.label :unit_bulk, "Mjerna jedinica:" %>
            <%= offer_items_form.text_field :unit_bulk, class: "form-control form-unit" %>
            <span class="help-block">kg, g, l...</span>
          </div>
          <div class="form-group col-xs-11 col-md-4">
            <%= offer_items_form.label :decimal_price_bulk, "Cijena:" %>
            <div class="input-group">
              <%= offer_items_form.text_field :decimal_price_bulk, class: "form-control", style: " font-weight: bold; color: #333", value: sprintf("%.2f", offer_items_form.object.decimal_price_bulk).gsub('.', ',') %><span class="input-group-addon price-unit">kn/kg</span>
            </div>
            <span class="help-block">upišite cijenu za mjernu jedinicu koju ste naveli</span> 
          </div>
          <div class="form-group col-xs-11 col-md-4">
            <%= offer_items_form.label :min_qty_per_order, "Minimalna količina:" %>
            <div class="input-group">
              <%= offer_items_form.text_field :min_qty_per_order, class: "form-control" %>
              <span class="input-group-addon min-qty-unit">kg</span> 
            </div>
            <span class="help-block">upišite min. količinu po narudžbi, u mj. jedinici koju ste naveli (decimalna točka umjesto zareza)</span>
          </div>      
        </div>



        <div class="row form-paket packaging-details">
          <div class="form-group col-xs-11 col-md-4">
            <%= offer_items_form.label :unit_package, "Način pakiranja i količina po paketu:" %>
            <%= offer_items_form.text_field :unit_package, class: "form-control" %>
            <span class="help-block">paket od 200g, staklena boca od 0,5l, kutija 10kom, vezica...</span>
          </div>
          <div class="form-group col-xs-11 col-md-4">
            <%= offer_items_form.label :decimal_price_package, "Cijena po paketu:" %>
            <div class="input-group">
              <%= offer_items_form.text_field :decimal_price_package, class: "form-control", style: " font-weight: bold; color: #333", value: sprintf("%.2f", offer_items_form.object.decimal_price_package).gsub('.', ',') %><span class="input-group-addon">kn/paket</span>
            </div>
            <span class="help-block">upišite cijenu za mjernu jedinicu koju ste naveli</span> 
          </div>      
        </div>
  
  
        
        <div class="row form-vario packaging-details">
          <div class="form-group col-xs-11 col-md-4">
            <%= offer_items_form.label :unit_vario, "Mjerna jedinica:" %>
            <%= offer_items_form.text_field :unit_vario, class: "form-control form-unit" %>
            <span class="help-block">npr. kg, g, l... (bez broja ispred)</span>
          </div>
          <div class="form-group col-xs-11 col-md-4">
            <%= offer_items_form.label :decimal_price_vario, "Cijena:" %>
            <div class="input-group">
              <%= offer_items_form.text_field :decimal_price_vario, class: "form-control", style: " font-weight: bold; color: #333", value: sprintf("%.2f", offer_items_form.object.decimal_price_vario).gsub('.', ',') %><span class="input-group-addon price-unit">kn/kg</span>
            </div>
            <span class="help-block">upišite cijenu za mjernu jedinicu koju ste naveli</span> 
          </div>

          <div class="form-group col-xs-11 col-md-4">
            <span class="help-block">U polje za opis upišite koje su dostupne veličine/količine komada, koja je minimalna narudžba i sl.</span>
          </div>     
        </div>
  
  
        <%#= offer_items_form.check_box :_destroy %> <%#= offer_items_form.label :_destroy, "Remove" %>     
        <%#= hidden_field_tag nil, "0", name: "#{offer_items_form.object_name}[_destroy]", id:  "#{offer_items_form.object_name.parameterize.underscore}__destroy" %>
       <%= link_to '', '', class: 'remove_nested_form glyphicon glyphicon-trash', "data-fields" => "offer_items" %>   
      </div>
      <% end %>
    </div>
    <p>
      <%= link_to 'Dodaj proizvod', '', class: 'duplicate_nested_form', "data-fields" => "offer_items" %>
    </p>
    <p class="row-submit">
      <%= f.submit "Spremi promjene", class: "btn btn-primary btn-lg" %>
    </p>
  </div>          

  <% end %>
</div>



<!-- <p>
  <i class="fa fa-tachometer"></i> kod narudžbe se omogućuje unos decimalnih brojeva, možete odrediti minimalnu količinu po narudžbi<br/>
  <i class="fa fa-gift"></i> kod narudžbe je moguć unos samo cijelih brojeva<br/>
  <i class="fa fa-question-circle"></i> namijenjeno za proizvode varijabilne težine kao što su tikve, lubenice, riba - kupac unosi približnu težinu koju želi, a ponuđač sam unosi isporučenu količinu - sukladno stvarnoj težini isporučenog proizvoda.
</p> -->
<!-- <div class="radio">
  <label>
  <input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked="checked" >
  <i class="fa fa-tachometer"></i> Rinfuza
  </label>
  </div>
  <div class="radio">
  <label>
  <input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">
  <i class="fa fa-gift"></i> Paket
  </label>
  </div>
  <div class="radio">
  <label>
  <input type="radio" name="optionsRadios" id="optionsRadios3" value="option2">
  <i class="fa fa-question-circle"></i> Kombo
  </label>
  </div> -->